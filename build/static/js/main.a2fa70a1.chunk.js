(this.webpackJsonpfiles=this.webpackJsonpfiles||[]).push([[0],{24:function(e,t,a){e.exports=a(44)},29:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),l=a.n(r),o=a(12),i=a(2),m=(a(29),a(9)),s=a(1),u=a(7),h=a(45),d=a(11),p=a(21),f=Object(n.createContext)(),E=function(e){var t=Object(n.useState)("http://localhost:9001/cards"),a=Object(u.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)([{en:"anesthesia",zh:"\u9ebb\u9189",icon:"fas fa-syringe",qty:[]},{en:"vip",zh:"vip",icon:"fas fa-award",qty:[]},{en:"tmrout",zh:"\u660e\u65e5\u51fa\u9662",icon:"fas fa-walking",qty:[]},{en:"nurse",zh:"\u770b\u8b77",icon:"fas fa-user-nurse",qty:[]},{en:"quarantine",zh:"\u9694\u96e2",icon:"fas fa-people-arrows",qty:[]}]),i=Object(u.a)(o,2),m=i[0],s=i[1];return c.a.createElement(f.Provider,{value:{url:r,setUrl:l,remarks:m,setRemarks:s}},e.children)};var b=function(e){return c.a.createElement("form",{onSubmit:e.onSubmit,className:"dialog-form"},c.a.createElement("main",null,c.a.createElement("p",null,e.thisCard._id),c.a.createElement("label",null,"\u7de8\u865f\uff1a",c.a.createElement("input",{name:"no",type:"number",min:"1",placeholder:e.thisCard.no,onChange:e.changeInput})),c.a.createElement("select",{htmlFor:"gender",placeholder:e.thisCard.gender,onChange:e.changeInput},c.a.createElement("option",{value:1},"\u7537"),c.a.createElement("option",{value:2},"\u5973")),c.a.createElement("label",null,"\u59d3\u540d\uff1a",c.a.createElement("input",{type:"text",name:"name",placeholder:e.thisCard.name,onChange:e.changeInput})),c.a.createElement("label",{className:"remark-div"},"\u5099\u8a3b\uff1a",e.remarks.map((function(t){return c.a.createElement("div",{key:Object(h.a)()},c.a.createElement("i",{className:t.icon}),c.a.createElement("span",null,t.zh,": "),c.a.createElement("select",{htmlFor:t.en,name:t.en,value:e.thisCard.remark[t.en],onChange:e.changeInput,className:"remark-item"},c.a.createElement("option",{value:"yes"},"yes"),c.a.createElement("option",{value:"no"},"no")),c.a.createElement("span",null,e.thisCard.remark[t.en]))})))),c.a.createElement("footer",null,c.a.createElement(d.Button,{label:"\u78ba\u8a8d",icon:"pi pi-check",className:"p-button-outlined"}),c.a.createElement(d.Button,{label:"\u522a\u9664",icon:"pi pi-times",className:"p-button-outlined p-button-danger",onClick:e.clickDelBtn})))};var g=function(){var e=Object(n.useContext)(f),t=e.url,a=e.remarks,r=(e.setRemarks,Object(n.useState)({hideWord:!1,dialog:!1})),l=Object(u.a)(r,2),o=l[0],i=l[1],E=Object(n.useState)([]),g=Object(u.a)(E,2),j=g[0],v=g[1],O=Object(n.useState)({}),k=Object(u.a)(O,2),y=k[0],C=k[1];return Object(n.useEffect)((function(){console.log("run useEffect fetch"),fetch("".concat(t,"/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pw:new URL(window.location.href).searchParams.get("key")})}).then((function(e){return e.json()})).then((function(e){console.log(e.data);return e.data.map((function(e){console.log(e.remark.anesthesia),e.remark.anesthesia})),v(e.data)})).catch((function(e){return console.error(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("h1",null,"List"),c.a.createElement("main",{id:"CardsDiv"},c.a.createElement("div",{className:"cards-div"},j.map((function(e){return c.a.createElement("div",{onClick:function(){return function(e){console.log("".concat(t,"/").concat(e._id)),fetch("".concat(t,"/").concat(e._id)).then((function(e){return e.json()})).then((function(e){C(e),i(Object(s.a)(Object(s.a)({},o),{},{dialog:!0}))})).catch((function(e){return console.error(e)}))}(e)},key:Object(h.a)()},c.a.createElement(p.Card,{title:e.no},c.a.createElement("p",null,c.a.createElement("i",{className:"pi pi-user",style:{color:1==e.gender?"navy":"hotpink"}})),c.a.createElement("p",null,c.a.createElement("span",{className:"name"},1==o.hideWord?e.name[0]+"*"+e.name.slice(2):e.name)),c.a.createElement("section",{className:"remark"},a.map((function(t){return c.a.createElement("div",{key:Object(h.a)()},"yes"===e.remark[t.en]&&c.a.createElement("i",{className:t.icon}))})))))}))),c.a.createElement("section",{className:"statistics-div"},c.a.createElement(d.Button,{label:"\u96b1\u85cf\u540d\u5b57",onClick:function(){i(Object(s.a)(Object(s.a)({},o),{},{hideWord:!o.hideWord}))}}))),1==o.dialog&&c.a.createElement("section",{className:"overlay"},c.a.createElement("div",{className:"dialog"},c.a.createElement("i",{className:"pi pi-times-circle",onClick:function(){i(Object(s.a)(Object(s.a)({},o),{},{dialog:!1}))}}),c.a.createElement(b,{thisCard:y,state:o,remarks:a,clickDelBtn:function(){return e=y._id,console.log(e),console.log(t),void fetch("".concat(t,"/").concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.error(e)}));var e},changeInput:function(e){e.preventDefault(),"remark-item"===e.target.className?C(Object(s.a)(Object(s.a)({},y),{},{remark:Object(s.a)(Object(s.a)({},y.remark),{},Object(m.a)({},e.target.name,e.target.value))})):C(Object(s.a)(Object(s.a)({},y),{},Object(m.a)({},e.target.name,e.target.value))),e.preventDefault()},onSubmit:function(e){e.preventDefault(),fetch("".concat(t,"/").concat(y._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}).then((function(e){return e.json()})).then((function(e){console.log(e),i(Object(s.a)(Object(s.a)({},o),{},{dialog:!1}))})).catch((function(e){return console.error(e)}))},key:Object(h.a)()}))))};var j=function(){var e=Object(n.useContext)(f),t=e.url,a=e.remarks,r=(e.setRemarks,Object(n.useState)({remark:{}})),l=Object(u.a)(r,2),o=l[0],i=l[1],h=function(e){"remark"===e.target.dataset.name?(console.log("remark"),i(Object(s.a)(Object(s.a)({},o),{},{remark:Object(s.a)(Object(s.a)({},o.remark),{},Object(m.a)({},e.target.name,e.target.value))}))):i(Object(s.a)(Object(s.a)({},o),{},Object(m.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",null,c.a.createElement("h2",null,"create"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat(t,"/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(){console.log(o)})).catch((function(e){return console.error("err",e)}))},id:"create-form"},c.a.createElement("label",null,"\u7de8\u865f\uff1a",c.a.createElement("input",{type:"text",name:"no",placeholder:"no",onChange:h})),c.a.createElement("label",null,"\u59d3\u540d\uff1a",c.a.createElement("input",{type:"text",name:"name",placeholder:"name",onChange:h})),c.a.createElement("label",null,"\u6027\u5225\uff1a",c.a.createElement("select",{name:"gender",form:"create-form",onChange:h},c.a.createElement("option",{value:"1"},"male"),c.a.createElement("option",{value:"2"},"female"))),a.map((function(e,t){return c.a.createElement("label",{key:"".concat(t,"-").concat(e.icon)},c.a.createElement("i",{className:e.icon}),e.zh,":",c.a.createElement("select",{"data-name":"remark",name:e.en,onChange:h},c.a.createElement("option",null,"yes"),c.a.createElement("option",null,"no")))})),c.a.createElement("button",null,"submit")))};var v=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(E,null,c.a.createElement(o.a,null,c.a.createElement("nav",null,c.a.createElement(o.b,{exact:!0,to:"/?key=123",activeClassName:"nav-selected"},"list"),c.a.createElement(o.b,{exact:!0,to:"/create",activeClassName:"nav-selected"},"create")),c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:"/",component:g}),c.a.createElement(i.a,{exact:!0,path:"/create",component:j})))))};a(41),a(42),a(43);var O=function(e){return c.a.createElement("div",null,e.children)};l.a.render(c.a.createElement(O,null,c.a.createElement(v,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.a2fa70a1.chunk.js.map